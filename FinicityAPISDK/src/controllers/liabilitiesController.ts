/**
 * Finicity APILib
 *
 * This file was automatically generated by APIMATIC v3.0 ( https://www.apimatic.io ).
 */

import { ApiResponse, RequestOptions } from '../core';
import {
  LoanPaymentDetails,
  loanPaymentDetailsSchema,
} from '../models/loanPaymentDetails';
import { bigint, string } from '../schema';
import { BaseController } from './baseController';

export class LiabilitiesController extends BaseController {
  /**
   * This returns the loan payment details of the customer for a loan-type account.
   *
   * **Note**: This is a premium service, billable per every successful API call.
   *
   * **Depreciation Notice**: V1 of this endpoint will be depricated. Please use Get Loan Payment Details
   * V2
   *
   * @param accept     application/json, application/xml
   * @param customerId ID of the customer
   * @param accountId  The Finicity ID of the account
   * @return Response from the API call
   */
  async getLoanPaymentDetails(
    accept: string,
    customerId: bigint,
    accountId: bigint,
    requestOptions?: RequestOptions
  ): Promise<ApiResponse<LoanPaymentDetails>> {
    const req = this.createRequest('GET');
    const mapped = req.prepareArgs({
      accept: [accept, string()],
      customerId: [customerId, bigint()],
      accountId: [accountId, bigint()],
    });
    req.header('Accept', mapped.accept);
    req.appendTemplatePath`/aggregation/v2/customers/${mapped.customerId}/accounts/${mapped.accountId}/loanDetails`;
    return req.callAsJson(loanPaymentDetailsSchema, requestOptions);
  }
}
